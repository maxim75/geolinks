{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/Geolinks.js","geolinks.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","geolink","mod","fieldMatchRegExp","toDms","deg","d","parseInt","md","Math","abs","m","sd","toRad","x","PI","toDegrees","zoomToRadius","zoom","toBoundingBox","data","R","radius","lngOffset","cos","lat","latOffset","south","north","east","lng","west","defaultData","title","language","extendObject","obj1","obj2","hasOwnProperty","converters","{latdegdec}","{londegdec}","{osmzoom}","{title}","{titlee}","encodeURIComponent","{language}","{latdegabs}","{latminint}","{latsecdec}","toFixed","{latNS}","{londegabs}","{lonminint}","{lonsecdec}","{lonEW}","{bbSouth}","{bbNorth}","{bbEast}","{bbWest}","parsers","floor","parseFloat","getLinkFromTemplate","template","convertFunc","replace","getFieldsFromTemplate","match","getLink","resourceId","resource","resourcesHash","parseUrl","url","result","formatIdx","parser"],"mappings":"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","file":"geolinks.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/* \r\n * Copyright (C) 2015 Maksym Kozlenko <max@kozlenko.info>\r\n *\r\n * This software may be modified and distributed under the terms\r\n * of the MIT license.  See the LICENSE file for details.\r\n */\r\n\r\n var geolink = geolink || {};\r\n\r\n (function(mod) {\r\n\r\n \tvar fieldMatchRegExp = /\\{\\S+?\\}/mg;\r\n\r\n\tvar toDms = function(deg) {\r\n        var d = parseInt(deg, 10);\r\n        var md = Math.abs(deg-d) * 60;\r\n        var m = parseInt(md, 10);\r\n        var sd = (md - m) * 60;\r\n        return [d, m, sd];\r\n    };\r\n\r\n    var toRad = function(x) {\r\n\t\treturn x * Math.PI / 180;\r\n\t};\r\n\r\n\tvar toDegrees = function(x) {\r\n\t\treturn x * 180 / Math.PI;\r\n\t};\r\n\r\n\tvar zoomToRadius = function(zoom) {\r\n\t\treturn 5;\r\n\t};\r\n\r\n\tvar toBoundingBox = function(data) {\r\n\t\tvar R = 6371;  // earth radius in km\r\n\t\tvar radius = zoomToRadius(data.zoom); // km\r\n\r\n\t\tvar lngOffset = toDegrees(radius/R/Math.cos(toRad(data.lat)));\r\n\t\tvar latOffset = toDegrees(radius/R);\r\n\r\n\t\treturn {\r\n\t\t\t\"south\": data.lat - latOffset,\r\n\t\t\t\"north\": data.lat + latOffset,\r\n\t\t\t\"east\": data.lng + lngOffset,\r\n\t\t\t\"west\": data.lng - lngOffset,\r\n\t\t};\r\n\t};\r\n\r\n\tvar defaultData = {\r\n\t\tlat: 0, \r\n\t\tlng:  0, \r\n\t\tzoom: 15, \r\n\t\ttitle: \"\", \r\n\t\tlanguage: \"en\"\r\n\t};\r\n\r\n\tvar extendObject = function(obj1, obj2) {\r\n       for (var i in obj2) {\r\n          if (!obj1.hasOwnProperty(i)) {\r\n             obj1[i] = obj2[i];\r\n          }\r\n       }\r\n       return obj1;\r\n    };\r\n\r\n\tmod.converters = {\r\n\t\t\"{latdegdec}\": function(data) { return data.lat; },\r\n\t\t\"{londegdec}\": function(data) { return data.lng; },\r\n\t\t\"{osmzoom}\": function(data) { return data.zoom; },\r\n\t\t\"{title}\": function(data) { return data.title; },\r\n\t\t\"{titlee}\": function(data) { return encodeURIComponent(data.title); },\r\n\t\t\"{language}\": function(data) { return data.language || \"en\"; },\r\n\t\t\"{latdegabs}\": function(data) { return Math.abs(toDms(data.lat)[0]); },\r\n\t\t\"{latminint}\": function(data) { return toDms(data.lat)[1]; },\r\n\t\t\"{latsecdec}\": function(data) { return toDms(data.lat)[2].toFixed(4); },\r\n\t\t\"{latNS}\": function(data) { return data.lat < 0 ? \"S\" : \"N\"; },\r\n\t\t\"{londegabs}\": function(data) { return Math.abs(toDms(data.lng)[0]); },\r\n\t\t\"{lonminint}\": function(data) { return toDms(data.lng)[1]; },\r\n\t\t\"{lonsecdec}\": function(data) { return toDms(data.lng)[2].toFixed(4); },\r\n\t\t\"{lonEW}\": function(data) { return data.lng < 0 ? \"W\" : \"E\"; },\r\n\t\t\"{bbSouth}\": function(data) { return toBoundingBox(data).south; },\r\n\t\t\"{bbNorth}\": function(data) { return toBoundingBox(data).north; },\r\n\t\t\"{bbEast}\": function(data) { return toBoundingBox(data).east; },\r\n\t\t\"{bbWest}\": function(data) { return toBoundingBox(data).west; },\r\n\t};\r\n\r\n\tmod.parsers = [\r\n\r\n\r\n\t\t{ \r\n\t\t\tn: \"Google Maps\",\r\n\t\t\tr: /https:\\/\\/tools.wmflabs.org\\/geohack.*=(-?\\d+\\.?\\d+?)_([NS])_(-?\\d+\\.?\\d+?)_([EW])/, \r\n\t\t\tf: function(r) { \r\n\t\t\t\tif(r && r.length === 5) {\r\n\t\t\t\t\tvar zoom = Math.floor(parseFloat(r[3]));\r\n\t\t\t\t\treturn { lat: r[1], lng: r[3] };\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t} \r\n\t\t},\r\n\t\t{ \r\n\t\t\tn: \"Google Maps\",\r\n\t\t\tr: /https?:\\/\\/www\\.google\\..*@(-?\\d+\\.\\d+),(-?\\d+\\.\\d+),(\\d+\\.?\\d?)+z/, \r\n\t\t\tf: function(r) { \r\n\t\t\t\tif(r && r.length === 4) {\r\n\t\t\t\t\tvar zoom = Math.floor(parseFloat(r[3]));\r\n\t\t\t\t\treturn { lat: r[1], lng: r[2], zoom: zoom };\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t} \r\n\t\t},\r\n\t\t{ \r\n\t\t\tn: \"lat,lng\",\r\n\t\t\tr: /(-?\\d+\\.\\d+)[;, ](-?\\d+\\.\\d+)/, \r\n\t\t\tf: function(r) { \r\n\t\t\t\treturn (r && r.length === 3) ? { lat: r[1], lng: r[2] } : null; \r\n\t\t\t} \r\n\t\t} \r\n\t];\r\n\r\n\tmod.getLinkFromTemplate = function(template, data) {\r\n\t\tvar convertFunc = function(x) {\r\n\t\t\treturn mod.converters[x] ? mod.converters[x](data) : x;\r\n\t\t};\r\n\t\treturn template.replace(fieldMatchRegExp, convertFunc);\r\n\t};\r\n\r\n\tmod.getFieldsFromTemplate = function(template) {\r\n\t\treturn template.match(fieldMatchRegExp);\r\n\t};\r\n\r\n\tmod.getLink = function(resourceId, data) {\r\n\t\tvar resource = mod.resourcesHash[resourceId];\r\n\t\treturn mod.getLinkFromTemplate(resource.template, data);\r\n\t};\r\n\r\n\tmod.parseUrl = function(url) {\r\n\t\tvar result = {};\r\n\r\n\t\tfor(var formatIdx in mod.parsers) {\r\n\t\t\tvar parser = mod.parsers[formatIdx];\r\n\t\t\tresult = parser.f(url.match(parser.r));\r\n\t\t\tif(result) break;\r\n\t\t}\r\n\t\treturn result ? extendObject(result, defaultData) : null;\r\n\t};\r\n\r\n})(geolink);\r\n\r\nif(typeof module !== 'undefined') module.exports = geolink;","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n/* \r\n * Copyright (C) 2015 Maksym Kozlenko <max@kozlenko.info>\r\n *\r\n * This software may be modified and distributed under the terms\r\n * of the MIT license.  See the LICENSE file for details.\r\n */\n\nvar geolink = geolink || {};\n\n(function (mod) {\n\n\tvar fieldMatchRegExp = /\\{\\S+?\\}/mg;\n\n\tvar toDms = function (deg) {\n\t\tvar d = parseInt(deg, 10);\n\t\tvar md = Math.abs(deg - d) * 60;\n\t\tvar m = parseInt(md, 10);\n\t\tvar sd = (md - m) * 60;\n\t\treturn [d, m, sd];\n\t};\n\n\tvar toRad = function (x) {\n\t\treturn x * Math.PI / 180;\n\t};\n\n\tvar toDegrees = function (x) {\n\t\treturn x * 180 / Math.PI;\n\t};\n\n\tvar zoomToRadius = function (zoom) {\n\t\treturn 5;\n\t};\n\n\tvar toBoundingBox = function (data) {\n\t\tvar R = 6371; // earth radius in km\n\t\tvar radius = zoomToRadius(data.zoom); // km\n\n\t\tvar lngOffset = toDegrees(radius / R / Math.cos(toRad(data.lat)));\n\t\tvar latOffset = toDegrees(radius / R);\n\n\t\treturn {\n\t\t\t\"south\": data.lat - latOffset,\n\t\t\t\"north\": data.lat + latOffset,\n\t\t\t\"east\": data.lng + lngOffset,\n\t\t\t\"west\": data.lng - lngOffset\n\t\t};\n\t};\n\n\tvar defaultData = {\n\t\tlat: 0,\n\t\tlng: 0,\n\t\tzoom: 15,\n\t\ttitle: \"\",\n\t\tlanguage: \"en\"\n\t};\n\n\tvar extendObject = function (obj1, obj2) {\n\t\tfor (var i in obj2) {\n\t\t\tif (!obj1.hasOwnProperty(i)) {\n\t\t\t\tobj1[i] = obj2[i];\n\t\t\t}\n\t\t}\n\t\treturn obj1;\n\t};\n\n\tmod.converters = {\n\t\t\"{latdegdec}\": function (data) {\n\t\t\treturn data.lat;\n\t\t},\n\t\t\"{londegdec}\": function (data) {\n\t\t\treturn data.lng;\n\t\t},\n\t\t\"{osmzoom}\": function (data) {\n\t\t\treturn data.zoom;\n\t\t},\n\t\t\"{title}\": function (data) {\n\t\t\treturn data.title;\n\t\t},\n\t\t\"{titlee}\": function (data) {\n\t\t\treturn encodeURIComponent(data.title);\n\t\t},\n\t\t\"{language}\": function (data) {\n\t\t\treturn data.language || \"en\";\n\t\t},\n\t\t\"{latdegabs}\": function (data) {\n\t\t\treturn Math.abs(toDms(data.lat)[0]);\n\t\t},\n\t\t\"{latminint}\": function (data) {\n\t\t\treturn toDms(data.lat)[1];\n\t\t},\n\t\t\"{latsecdec}\": function (data) {\n\t\t\treturn toDms(data.lat)[2].toFixed(4);\n\t\t},\n\t\t\"{latNS}\": function (data) {\n\t\t\treturn data.lat < 0 ? \"S\" : \"N\";\n\t\t},\n\t\t\"{londegabs}\": function (data) {\n\t\t\treturn Math.abs(toDms(data.lng)[0]);\n\t\t},\n\t\t\"{lonminint}\": function (data) {\n\t\t\treturn toDms(data.lng)[1];\n\t\t},\n\t\t\"{lonsecdec}\": function (data) {\n\t\t\treturn toDms(data.lng)[2].toFixed(4);\n\t\t},\n\t\t\"{lonEW}\": function (data) {\n\t\t\treturn data.lng < 0 ? \"W\" : \"E\";\n\t\t},\n\t\t\"{bbSouth}\": function (data) {\n\t\t\treturn toBoundingBox(data).south;\n\t\t},\n\t\t\"{bbNorth}\": function (data) {\n\t\t\treturn toBoundingBox(data).north;\n\t\t},\n\t\t\"{bbEast}\": function (data) {\n\t\t\treturn toBoundingBox(data).east;\n\t\t},\n\t\t\"{bbWest}\": function (data) {\n\t\t\treturn toBoundingBox(data).west;\n\t\t}\n\t};\n\n\tmod.parsers = [{\n\t\tn: \"Google Maps\",\n\t\tr: /https:\\/\\/tools.wmflabs.org\\/geohack.*=(-?\\d+\\.?\\d+?)_([NS])_(-?\\d+\\.?\\d+?)_([EW])/,\n\t\tf: function (r) {\n\t\t\tif (r && r.length === 5) {\n\t\t\t\tvar zoom = Math.floor(parseFloat(r[3]));\n\t\t\t\treturn { lat: r[1], lng: r[3] };\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t}, {\n\t\tn: \"Google Maps\",\n\t\tr: /https?:\\/\\/www\\.google\\..*@(-?\\d+\\.\\d+),(-?\\d+\\.\\d+),(\\d+\\.?\\d?)+z/,\n\t\tf: function (r) {\n\t\t\tif (r && r.length === 4) {\n\t\t\t\tvar zoom = Math.floor(parseFloat(r[3]));\n\t\t\t\treturn { lat: r[1], lng: r[2], zoom: zoom };\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t}, {\n\t\tn: \"lat,lng\",\n\t\tr: /(-?\\d+\\.\\d+)[;, ](-?\\d+\\.\\d+)/,\n\t\tf: function (r) {\n\t\t\treturn r && r.length === 3 ? { lat: r[1], lng: r[2] } : null;\n\t\t}\n\t}];\n\n\tmod.getLinkFromTemplate = function (template, data) {\n\t\tvar convertFunc = function (x) {\n\t\t\treturn mod.converters[x] ? mod.converters[x](data) : x;\n\t\t};\n\t\treturn template.replace(fieldMatchRegExp, convertFunc);\n\t};\n\n\tmod.getFieldsFromTemplate = function (template) {\n\t\treturn template.match(fieldMatchRegExp);\n\t};\n\n\tmod.getLink = function (resourceId, data) {\n\t\tvar resource = mod.resourcesHash[resourceId];\n\t\treturn mod.getLinkFromTemplate(resource.template, data);\n\t};\n\n\tmod.parseUrl = function (url) {\n\t\tvar result = {};\n\n\t\tfor (var formatIdx in mod.parsers) {\n\t\t\tvar parser = mod.parsers[formatIdx];\n\t\t\tresult = parser.f(url.match(parser.r));\n\t\t\tif (result) break;\n\t\t}\n\t\treturn result ? extendObject(result, defaultData) : null;\n\t};\n})(geolink);\n\nif (typeof module !== 'undefined') module.exports = geolink;\n\n},{}]},{},[1])\n\n"],"sourceRoot":"/source/"}