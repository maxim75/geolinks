{"version":3,"sources":["Geolinks.js"],"names":["geolink","mod","resources","id","template","tags","resourcesHash","forEach","x","toDms","deg","d","parseInt","md","Math","abs","m","sd","toRad","PI","toDegrees","zoomToRadius","zoom","toBoundingBox","data","R","radius","lngOffset","cos","lat","latOffset","south","north","east","lng","west","converters","{latdegdec}","{londegdec}","{osmzoom}","{title}","title","{titlee}","encodeURIComponent","{language}","language","{latdegabs}","{latminint}","{latsecdec}","toFixed","{latNS}","{londegabs}","{lonminint}","{lonsecdec}","{lonEW}","{bbSouth}","{bbNorth}","{bbEast}","{bbWest}","getLinkFromTemplate","console","log","arguments","convertFunc","replace","getLink","resourceId","resource"],"mappings":"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","file":"geolinks.min.js","sourcesContent":["/* \r\n * Copyright (C) 2015 Maksym Kozlenko <max@kozlenko.info>\r\n *\r\n * This software may be modified and distributed under the terms\r\n * of the MIT license.  See the LICENSE file for details.\r\n */\r\n\r\n var geolink = geolink || {};\r\n\r\n (function(mod) {\r\n\r\n\t// https://en.wikipedia.org/wiki/Template:GeoTemplate\r\n\tmod.resources = [\r\n\t\t{ \r\n\t\t\tid: \"bing\", \r\n\t\t\ttemplate: \"https://www.bing.com/maps/?v=2&cp={latdegdec}~{londegdec}&style=r&lvl={osmzoom}&sp=Point.{latdegdec}_{londegdec}_{titlee}___\"\r\n\t\t},\r\n\r\n\t\t{ \r\n\t\t\tid: \"google\", \r\n\t\t\ttemplate: \"https://maps.google.com/maps?ll={latdegdec},{londegdec}&q={latdegdec},{londegdec}&hl={language}&t=m&z={osmzoom}\"\r\n\t\t},\r\n\r\n\t\t{ \r\n\t\t\tid: \"osm\", \r\n\t\t\ttemplate: \"https://www.openstreetmap.org/?mlat={latdegdec}&mlon={londegdec}&zoom={osmzoom}&layers=M\"\r\n\t\t},\r\n\r\n\t\t{ \r\n\t\t\tid: \"wikimapia\", \r\n\t\t\ttemplate: \"http://wikimapia.org/#lang={language}&lat={latdegdec}&lon={londegdec}&z={osmzoom}&m=w\"\r\n\t\t},\r\n\r\n\t\t{ \r\n\t\t\tid: \"geolocation.ws\", \r\n\t\t\ttemplate: \"https://www.geolocation.ws/map/{latdegdec},{londegdec}/{osmzoom}\",\r\n\t\t\ttags: [ \"photo\" ]\r\n\t\t},\r\n\r\n\t\t{ \r\n\t\t\tid: \"yandex\", \r\n\t\t\ttemplate: \"https://maps.yandex.ru/?ll={londegdec},{latdegdec}&spn={span},{span}&l=map&pt={londegdec},{latdegdec}\"\r\n\t\t},\r\n\r\n\t\t{ \r\n\t\t\tid: \"visicom\", \r\n\t\t\ttemplate: \"http://maps.visicom.ua/#lng={londegdec};lat={latdegdec};z=6;map=ukraine_en;lngm={londegdec};latm={latdegdec};\",\r\n\t\t\ttags: [ \"country-ua\" ]\r\n\t\t},\r\n\r\n\t\t{\r\n\t\t\tid: \"acme mapper\",\r\n\t\t\ttemplate: \"http://mapper.acme.com/?ll={latdegdec},{londegdec}&z={osmzoom}&t=M&marker0={latdegdec},{londegdec},{titlee}\"\r\n\t\t},\r\n\r\n\t\t{\r\n\t\t\tid: \"arctic.io\",\r\n\t\t\ttemplate: \"http://www.arctic.io/wikipedia/?lon={londegdec}&lat={latdegdec}&title={titlee}\"\r\n\t\t},\r\n\r\n\t\t{\r\n\t\t\tid: \"wikidata\",\r\n\t\t\ttemplate: \"https://tools.wmflabs.org/wikidata-todo/around.html?lat={latdegdec}&lon={londegdec}&radius=15&lang=en\"\r\n\t\t},\r\n\r\n\t\t{\r\n\t\t\tid: \"commons\",\r\n\t\t\ttemplate: \"https://tools.wmflabs.org/wiwosm/osm-on-ol/commons-on-osm.php?zoom={osmzoom}&lat={latdegdec}&lon={londegdec}\",\r\n\t\t\ttags: [ \"photo\" ]\r\n\t\t},\r\n\r\n\t\t{\r\n\t\t\tid: \"flickr\",\r\n\t\t\ttemplate: \"https://www.flickr.com/map/?fLat={latdegdec}&fLon={londegdec}&zl={osmzoom}\",\r\n\t\t\ttags: [ \"photo\" ]\r\n\t\t},\r\n\r\n\t\t{\r\n\t\t\tid: \"panoramio\",\r\n\t\t\ttemplate: \"http://www.panoramio.com/map/#lt={latdegdec}&ln={londegdec}&z=0&k=0&a=1&tab=1\",\r\n\t\t\ttags: [ \"photo\" ]\r\n\t\t},\r\n\r\n\t\t{\r\n\t\t\tid: \"flightradar24\",\r\n\t\t\ttemplate: \"http://www.flightradar24.com/{latdegdec},{londegdec}/{osmzoom}\",\r\n\t\t\ttags: [  ]\r\n\t\t},\r\n\r\n\t\t{\r\n\t\t\tid: \"street-directory.com.au\",\r\n\t\t\ttemplate: \"http://www.street-directory.com.au/sd_new/genmap.cgi?x={londegdec}&y={latdegdec}&sizex=800&sizey=800&level=5&star=6\",\r\n\t\t\ttags: [ \"country-au\" ]\r\n\t\t},\r\n\r\n\t\t{\r\n\t\t\tid: \"mapillary\",\r\n\t\t\ttemplate: \"http://www.mapillary.com/map/search/{bbSouth}/{bbNorth}/{bbWest}/{bbEast}\",\r\n\t\t\ttags: [ \"photo\" ]\r\n\t\t},\r\n\r\n\t\t{\r\n\t\t\tid: \"commercialrealestate.com.au\",\r\n\t\t\ttemplate: \"http://www.commercialrealestate.com.au/for-sale/?bb={bbNorth}%2C{bbSouth}%2C{bbEast}%2C{bbWest}%2C{osmzoom}\",\r\n\t\t\ttags: [ \"real estate\", \"country-au\" ]\r\n\t\t},\r\n\r\n\t\t{\r\n\t\t\tid: \"zillow\",\r\n\t\t\ttemplate: \"http://www.zillow.com/homes/for_sale/featured_sort/{bbNorth},{bbEast},{bbSouth},{bbWest}_rect/\",\r\n\t\t\ttags: [ \"real estate\", \"country-us\" ]\r\n\t\t},\r\n\r\n\t\t{\r\n\t\t\tid: \"osm missing streets\",\r\n\t\t\ttemplate: \"http://tools.geofabrik.de/osmi/?view=highways&lon={londegdec}&lat={latdegdec}&zoom={osmzoom}&overlays=name_missing_major,name_missing_minor\",\r\n\t\t\ttags: [ \"osm\" ]\r\n\t\t}\r\n\t];\r\n\r\n\tvar resourcesHash = {};\r\n\r\n\tmod.resources.forEach(function(x) {\r\n\t\tresourcesHash[x.id] = x;\r\n\t});\r\n\r\n\tvar toDms = function(deg) {\r\n        var d = parseInt(deg, 10);\r\n        var md = Math.abs(deg-d) * 60;\r\n        var m = parseInt(md, 10);\r\n        var sd = (md - m) * 60;\r\n        return [d, m, sd];\r\n    };\r\n\r\n    var toRad = function(x) {\r\n\t\treturn x * Math.PI / 180;\r\n\t};\r\n\r\n\tvar toDegrees = function(x) {\r\n\t\treturn x * 180 / Math.PI;\r\n\t};\r\n\r\n\tvar zoomToRadius = function(zoom) {\r\n\t\treturn 5;\r\n\t};\r\n\r\n\tvar toBoundingBox = function(data) {\r\n\t\tvar R = 6371;  // earth radius in km\r\n\t\tvar radius = zoomToRadius(data.zoom); // km\r\n\r\n\t\tvar lngOffset = toDegrees(radius/R/Math.cos(toRad(data.lat)));\r\n\t\tvar latOffset = toDegrees(radius/R);\r\n\r\n\t\treturn {\r\n\t\t\t\"south\": data.lat - latOffset,\r\n\t\t\t\"north\": data.lat + latOffset,\r\n\t\t\t\"east\": data.lng + lngOffset,\r\n\t\t\t\"west\": data.lng - lngOffset,\r\n\t\t};\r\n\t};\r\n\r\n\tvar converters = {\r\n\t\t\"{latdegdec}\": function(data) { return data.lat; },\r\n\t\t\"{londegdec}\": function(data) { return data.lng; },\r\n\t\t\"{osmzoom}\": function(data) { return data.zoom; },\r\n\t\t\"{title}\": function(data) { return data.title; },\r\n\t\t\"{titlee}\": function(data) { return encodeURIComponent(data.title); },\r\n\t\t\"{language}\": function(data) { return data.language || \"en\"; },\r\n\t\t\"{latdegabs}\": function(data) { return Math.abs(toDms(data.lat)[0]); },\r\n\t\t\"{latminint}\": function(data) { return toDms(data.lat)[1]; },\r\n\t\t\"{latsecdec}\": function(data) { return toDms(data.lat)[2].toFixed(4); },\r\n\t\t\"{latNS}\": function(data) { return data.lat < 0 ? \"S\" : \"N\"; },\r\n\t\t\"{londegabs}\": function(data) { return Math.abs(toDms(data.lng)[0]); },\r\n\t\t\"{lonminint}\": function(data) { return toDms(data.lng)[1]; },\r\n\t\t\"{lonsecdec}\": function(data) { return toDms(data.lng)[2].toFixed(4); },\r\n\t\t\"{lonEW}\": function(data) { return data.lng < 0 ? \"W\" : \"E\"; },\r\n\t\t\"{bbSouth}\": function(data) { return toBoundingBox(data).south; },\r\n\t\t\"{bbNorth}\": function(data) { return toBoundingBox(data).north; },\r\n\t\t\"{bbEast}\": function(data) { return toBoundingBox(data).east; },\r\n\t\t\"{bbWest}\": function(data) { return toBoundingBox(data).west; },\r\n\t};\r\n\r\n\tmod.getLinkFromTemplate = function(template, data) {\r\n\t\tconsole.log(\"args\", arguments);\r\n\r\n\t\tvar convertFunc = function(x) {\r\n\t\t\treturn converters[x] ? converters[x](data) : x;\r\n\t\t};\r\n\t\treturn template.replace(/\\{.+?\\}/mg, convertFunc);\r\n\t};\r\n\r\n\tmod.getLink = function(resourceId, data) {\r\n\t\tvar resource = resourcesHash[resourceId];\r\n\t\treturn mod.getLinkFromTemplate(resource.template, data);\r\n\t};\r\n\r\n})(geolink);"],"sourceRoot":"/source/"}